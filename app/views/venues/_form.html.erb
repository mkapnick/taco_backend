<%= form_for(@venue) do |f| %>
  <% if @venue.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@venue.errors.count, "error") %> prohibited this venue from being saved:</h2>

      <ul>
      <% @venue.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>



   <div class="field">
    <%= f.label :venue_name %><br />
    <%= f.text_field :venue_name %>
  </div>
  
  <div class="field">
    <%= f.label :website %><br />
    <%= f.text_field :website %>
  </div>


<div class="ui-widget">
  <%= f.label :tags %><br />
 <input id="tags" <%= f.text_field :tags %> >

</div>

<body>
  <div id="chart_div" style="width: 600px; height: 200px; position: relative; left: 15%; "></div>
</body>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
<link rel="stylesheet" href="/resources/demos/style.css" />

  Tags used so far: 
 
  <%
  require 'json'
  require 'open-uri'
  occurences =0 
  


  %>

<div style="position:absolute; left: 30%;top:27%;">
  <select>
    <%
      tagsArrayList.each do |x|
    %> 
         <option value= <%= "#{x}" %>> <%= "#{x}" %> </option> 
    <% end  %> 
 </select> 
</div>
  
 <script type="text/javascript">
      $(function() {
      var array = [
      "organic",
      "lunch",
      "brunch",
      "cocktail",
      "dessert",
      "bar",
      "dinner",
      "wine",
      "local",
      "american", 
      "nordic",
      "happy-hour",
      "cocktails",
      "beer",
      "indian",
      "indoor", 
      "lounge",
      "cheese", 
      "private", 
      "tasting", 
      "italian",
      "french",
      "breakfast",
      "desserts",
      "steakhouse", 
      "sushi",
      "drinks",
      "mediterranean"

    ];

     $( "#tags" ).autocomplete({
      source: array
    });

    });

 </script>

  <div class="field">
    <%= f.label :latitude %><br />
    <%= f.text_field :latitude %>
  </div>
  <div class="field">
    <%= f.label :longitude %><br />
    <%= f.text_field :longitude %>
  </div>
  <div class="field">
    <%= f.label :nytID %><br />
    <%= f.text_field :nytID %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>



 
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(function(){drawChart('<%= "#{v1}"%>','<%="#{v2}"%>','<%="#{v3}"%>','<%="#{v4}"%>','<%="#{v5}"%>','<%="#{v6}"%>','<%="#{v7}"%>','<%="#{v8}"%>','<%="#{v9}"%>','<%="#{v10}"%>','<%="#{v11}"%>','<%="#{v12}"%>','<%="#{v13}"%>','<%="#{v14}"%>','<%="#{v15}"%>','<%="#{v16}"%>','<%="#{v17}"%>','<%="#{v18}"%>','<%="#{v19}"%>','<%="#{v20}"%>','<%="#{v21}"%>','<%="#{v22}"%>','<%="#{v23}"%>','<%="#{v24}"%>','<%="#{v25}"%>','<%="#{v26}"%>','<%="#{v27}"%>','<%="#{v27}"%>')});
      function drawChart(v1,v2,v3,v4,v5,v6,v7,v8,v9,v10,v11,v12,v13,v14,v15,v16,v17,v18,v19,v20,v21,v22,v23,v24,v25,v26,v27,v28) {
        //alert (v1);
        var data = google.visualization.arrayToDataTable([
          ['Name', 'Occurences'],
          ['organic', parseInt(v1)],
          ['lunch', parseInt(v2)],
          ['brunch', parseInt(v3)],
          ['cocktail', parseInt(v4)],
          ['dessert', parseInt(v5)],
          ['bar', parseInt(v6)],
          ['dinner', parseInt(v7)],
          ['wine', parseInt(v8)],
          ['local', parseInt(v9)],
          ['american', parseInt(v10)],
          ['nordic', parseInt(v11)],
          ['happy-hour', parseInt(v12)],
          ['cocktails', parseInt(v13)],
          ['beer', parseInt(v14)],
          ['indian', parseInt(v15)],
          ['indoor', parseInt(v16)],
          ['lounge', parseInt(v17)],
          ['cheese', parseInt(v18)],
          ['private', parseInt(v19)],
          ['tasting', parseInt(v20)],
          ['italian', parseInt(v21)],
          ['french',  parseInt(v22)],
          ['breakfast', parseInt(v23)],
          ['desserts', parseInt(v24)],
          ['steakhouse', parseInt(v25)],
          ['sushi', parseInt(v26)],
          ['drinks', parseInt(v27)],
          ['mediterranean', parseInt(v28)]
          ]);
        var options = {
          title: 'Tag Occurences',
          hAxis: {slantedTextAngle: 90, maxTextLines: 10, title: 'Tag Name', titleTextStyle: {color: 'black'}}
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>

<% end %>


