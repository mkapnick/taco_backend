<%= form_for(@venue) do |f| %>
  <% if @venue.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@venue.errors.count, "error") %> prohibited this venue from being saved:</h2>

      <ul>
      <% @venue.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

   <div class="field">
    <%= f.label :venue_name %><br />
    <%= f.text_field :venue_name %>
  </div>
  
  <div class="field">
    <%= f.label :website %><br />
    <%= f.text_field :website %>
  </div>
  
   <div class="field">
    <%= f.label :tags %><br />
    <%= f.text_field :tags %>
  </div>

  <div id="tags">
    <input type="text" name="TAGS">
  </div>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

  Tags used so far: 
 
  <%
  result = JSON.parse open('http://nyt-project-taco.herokuapp.com/venues.json').read
  tagsArrayList = Array.new()
 
  result.each { |i| 
    tags = i.fetch('tags')
    
    if (tags != "insert")
        words = tags.split(',')     
        words.each do |word|
   
          if (!tagsArrayList.include?(word))
              tagsArrayList.push(word)
            end
        end
    end
  }
  %>

 <script type="text/javascript">
      $(function() {
      var array = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];

     $( "#tags" ).autocomplete({
      source: array
    });
     
    });

 </script>
 
  <%
      tagsArrayList.each do |x|
  %> 
       <script type="text/javascript">
            //alert ("ok, pushing in arraylist");
            array.push("#{x}");
       </script>
    
 <% end  %> 

  <script type="text/javascript">
      
  </script>
    

  <div class="field">
    <%= f.label :latitude %><br />
    <%= f.text_field :latitude %>
  </div>
  <div class="field">
    <%= f.label :longitude %><br />
    <%= f.text_field :longitude %>
  </div>
  <div class="field">
    <%= f.label :nytID %><br />
    <%= f.text_field :nytID %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>


